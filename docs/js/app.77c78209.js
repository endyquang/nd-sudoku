(function(t){function e(e){for(var i,s,a=e[0],c=e[1],u=e[2],f=0,h=[];f<a.length;f++)s=a[f],r[s]&&h.push(r[s][0]),r[s]=0;for(i in c)Object.prototype.hasOwnProperty.call(c,i)&&(t[i]=c[i]);l&&l(e);while(h.length)h.shift()();return o.push.apply(o,u||[]),n()}function n(){for(var t,e=0;e<o.length;e++){for(var n=o[e],i=!0,a=1;a<n.length;a++){var c=n[a];0!==r[c]&&(i=!1)}i&&(o.splice(e--,1),t=s(s.s=n[0]))}return t}var i={},r={app:0},o=[];function s(e){if(i[e])return i[e].exports;var n=i[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,s),n.l=!0,n.exports}s.m=t,s.c=i,s.d=function(t,e,n){s.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},s.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},s.t=function(t,e){if(1&e&&(t=s(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(s.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)s.d(n,i,function(e){return t[e]}.bind(null,i));return n},s.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return s.d(e,"a",e),e},s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},s.p="/nudoku/";var a=window["webpackJsonp"]=window["webpackJsonp"]||[],c=a.push.bind(a);a.push=e,a=a.slice();for(var u=0;u<a.length;u++)e(a[u]);var l=c;o.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("56d7")},"38c8":function(t,e,n){},"56d7":function(t,e,n){"use strict";n.r(e);n("cadf"),n("551c"),n("097d");var i=n("2b0e"),r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"app"},on:{touchmove:function(t){t.preventDefault()}}},[t.pending?n("div",{staticClass:"pending"},[n("div",{staticClass:"pending__logo"},[t._v("\n      NUDOKU\n    ")]),t.won?[t.won?n("div",{staticClass:"pending__noti"},[t._v("YOU'VE LUCKYLY WON!")]):t._e()]:t.lost?n("div",{staticClass:"pending__noti"},[t._v("YOU DUMBASS LOSER!")]):n("div",{staticClass:"pending__subtitle"},[t._v("Just a dummy text to make it look not as empty as its creator")]),n("div",{staticClass:"pending__score"}),n("button",{staticClass:"pending__start",on:{click:t.start}},[t._v("PLAY "+t._s(t.won||t.lost?"AGAIN":"NOW"))])],2):t._e(),n("header",{staticClass:"header"},[n("span",[t._v("Mistakes: "+t._s(t.mistakes)+"/3")]),n("button",{on:{click:t.togglePaused}},[t._v("\n      "+t._s(t._f("prettifyTime")(t.time))+" "),n("i",{staticClass:"header__btn__icon",class:[t.paused?"ico__pause":"ico__play"]})]),n("button",{on:{click:t.start}},[t._v("New Game")])]),n("main",{staticClass:"main"},[t.paused?n("div",{staticClass:"paused"},[n("div",{staticClass:"paused__content"},[n("button",{on:{click:t.togglePaused}},[n("i",{staticClass:"ico__play ico--xl"})])])]):t._e(),n("div",{staticClass:"play",class:{"play--paused":t.paused,"play--noting":t.noting}},t._l(t.boxes,function(e,i){return n("div",{key:"b-"+i,staticClass:"play__box",on:{touchmove:t.onTouchMove}},[t._l(e,function(e){return[t.paused?n("div",{key:e.id,staticClass:"play__cell"}):n("div",{key:e.id,ref:"cells",refInFor:!0,staticClass:"play__cell",class:[t.actives[e.id]?"selected":t.active===e?"active":t.multiple||i!==t.active.box&&e.row!==t.active.row&&e.col!==t.active.col?t.temps[t.active.id]&&t.temps[t.active.id]===t.temps[e.id]?"same":"":"affected"],attrs:{"data-id":e.addr},on:{click:function(n){!t.touchable&&t.onActiveChange(e,n)},touchstart:function(n){t.onActiveChange(e,n)}}},[e.value?n("div",{staticClass:"play__cell__fixed",attrs:{"data-id":e.addr}},[t._v(t._s(e.value))]):t.notesState[e.id]?n("div",{staticClass:"play__cell__notes",attrs:{"data-id":e.addr}},t._l(t.notes[e.id],function(i,r){return n("div",{key:r,staticClass:"play__cell__notes__item",attrs:{"data-id":e.addr}},[t._v("\n                "+t._s(i>0?i:"")+"\n              ")])})):t.temps[e.id]?n("div",{staticClass:"play__cell__temp",class:{wrong:t.temps[e.id]!==t.answer[e.id]},attrs:{"data-id":e.addr}},[t._v("\n              "+t._s(t.temps[e.id])+"\n            ")]):t._e()])]})],2)})),n("div",{staticClass:"controls"},[n("button",{class:{primary:t.noting},on:{click:t.toggleNoting}},[n("div",[t._v("✎")]),t._v(" Note")]),n("button",{on:{click:t.undo}},[n("div",[t._v("↺")]),t._v(" Undo")]),n("button",{on:{click:t.erase}},[n("div",[t._v("✘")]),t._v(" Erase")]),n("button",{class:{primary:t.multiple},on:{click:t.toggleMultiple}},[n("div",[t._v("☷")]),t._v(" Multiple")])]),n("div",{staticClass:"number"},t._l(9,function(e){return n("div",{key:e,staticClass:"numbers__item",class:{disabled:9===t.filledNumbers[e-1],primary:t.noting},on:{click:function(n){t.newTemp(e)}}},[t._v(t._s(e))])}))])])},o=[],s=(n("28a5"),n("3835")),a=(n("5df3"),n("1c4c"),n("ac4d"),n("8a81"),n("ac6a"),n("456d"),n("4f7f"),n("20d6"),n("2909")),c=_(),u=y(),l=b(function(t,e){return w(e)}),f=b(function(t,e){return x(e)});b(function(t,e){return k(e)});function h(){var t=b(function(){return""}),e=b(function(){return Array.from({length:9},function(){return 1})});return n(),{answer:t,trimmedAnswer:d(t)};function n(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;if(81!==r){var o=[];if(e[r].forEach(function(t,e){1===t&&o.push(e)}),!o.length)return e[r].forEach(function(t,n){2===t&&(e[r][n]=1)}),-1;var s=M(o);if(i(r,s,-1),-1===n(r+1))return e[r][s]=2,i(r,s,1),n(r);t[r]=s+1}}function i(t,n){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-1;l[t].forEach(function(t){e[t][n]+=i})}}function d(t){var e=A(Array.from({length:81},function(t,e){return e})),n=Object(a["a"])(t),i=81;function r(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;if(!(81===t||i<22)){var o=e[t],s=n.splice(o,1,"")[0];v(n)?i--:n.splice(o,1,s),r(t+1)}}return r(),n}function v(t){var e=Object(a["a"])(t),n=m(e),i=0;return r(),1===i;function r(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;if(81===t)return++i;if(!n[t])return r(t+1);var e=g(n[t]);e>-1?(o(t,e,-1),r(t+1),i<2&&(n[t][e]=2,o(t,e,1),r(t))):n[t].forEach(function(e,i){2===e&&(n[t][i]=1)})}function o(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-1;l[t].forEach(function(t){n[t]&&(n[t][e]+=i)})}}function p(t,e,n,i){var r=e[n]-1,o=!0,s=!1,a=void 0;try{for(var c,u=f[n][Symbol.iterator]();!(o=(c=u.next()).done);o=!0){var l=c.value;t[l]&&t[l][r]&&(t[l][r]=0,1===--i[l]&&(e[l]=t[l].findIndex(Boolean)+1,t[l]=null,p(t,e,l,i)))}}catch(h){s=!0,a=h}finally{try{o||null==u.return||u.return()}finally{if(s)throw a}}}function m(t){for(var e=[],n=[],i=0;i<81;i++)if(t[i])n[i]=null;else{e[i]=9,n[i]=Array.from({length:9},function(){return 1});var r=!0,o=!1,s=void 0;try{for(var a,c=f[i][Symbol.iterator]();!(r=(a=c.next()).done);r=!0){var u=a.value,l=t[u];if(l&&n[i][l-1]&&(n[i][l-1]=0,1===--e[i])){t[i]=n[i].findIndex(Boolean)+1,n[i]=null,p(n,t,i,e);break}}}catch(h){o=!0,s=h}finally{try{r||null==c.return||c.return()}finally{if(o)throw s}}}return n}function g(t){for(var e=0;e<9;e++)if(1===t[e])return e}function _(){return Array.from({length:81},function(t,e){return C(e)})}function y(){return Array.from({length:9},function(t,e){var n=e%3*3+27*Math.floor(e/3);return Array.from({length:9},function(t,e){var i=e%3+9*Math.floor(e/3);return n+i})})}function b(t){return Array.from({length:81},t)}function w(t){for(var e=[],n=C(t),i=n.col,r=n.row,o=r+1,s=r+3-r%3,a=i-i%3,c=i+3-i%3,u=t+1;u<t+9-t%9;u++)e.push(u);for(var l=o;l<s;l++)for(var f=a;f<c;f++)e.push(O(f,l));for(var h=t%9+9*s;h<81;h+=9)e.push(h);return e}function x(t){var e=k(t);return Array.from(new Set(Array.prototype.concat.apply([],e)))}function k(t){for(var e=[[],[],[]],n=C(t),i=n.col,r=n.row,o=n.box,s=9*r;s<t+9-i;s++)e[0].push(s);for(var a=i;a<81;a+=9)e[1].push(a);return u[o].forEach(function(t){return e[2].push(t)}),e}function A(t){for(var e=Object(a["a"])(t),n=t.length,i=[],r=0;r<n;r++)i.push(I(e));return i}function C(t){var e=t%9,n=Math.floor(t/9);return{col:e,row:n,box:3*Math.floor(n/3)+Math.floor(e/3)}}function O(t,e){return 9*e+t}function I(t){return t.splice(S(t),1)[0]}function M(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return t[S(t)]}function S(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return Math.floor(Math.random()*t.length)}var T={generate:h,addresses:c};function E(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=3600,n=60,i=Math.floor(t/e),r=Math.floor((t-i*e)/n),o=Math.floor(t-i*e-r*n);return[i,r,o]}function N(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e={active:-1,actives:[],answer:[],boxes:[],corrects:0,difficulty:"hardest",histories:[],lost:!1,mistakes:0,multiple:!1,notes:[],noting:!1,paused:!1,pending:!0,tempHistory:{},temps:[],time:0,timer:null,won:!1};if(t)return Object.keys(e);for(var n in e){var i=localStorage[n];void 0!==i&&"undefined"!==i&&(e[n]=JSON.parse(i||"null"))}return e}function j(){var t={},e=N(!0);return e.forEach(function(e){t[e]={deep:!0,handler:function(t){localStorage[e]=JSON.stringify(t)}}}),t}var H={name:"app",data:function(){return N()},watch:j(),mounted:function(){this.startTimer()},computed:{notesState:function(){return this.notes.map(function(t){var e=!0,n=!1,i=void 0;try{for(var r,o=t[Symbol.iterator]();!(e=(r=o.next()).done);e=!0){var s=r.value;if(s>0)return!0}}catch(a){n=!0,i=a}finally{try{e||null==o.return||o.return()}finally{if(n)throw i}}})},filledNumbers:function(){var t=Array.from({length:9},function(){return 0});return this.temps.forEach(function(e,n){e>0&&t[e-1]++}),t},touchable:function(){return"ontouchstart"in document.documentElement}},methods:{start:function(){this.stopTimer();var t=T.generate("hardest"),e=t.answer,n=t.trimmedAnswer;this.active=-1,this.actives=Array.from({length:81},function(){return!1}),this.answer=e,this.boxes=this.makeBoxes(n),this.corrects=n.filter(Boolean).length,this.histories=[],this.mistakes=0,this.multiple=!1,this.notes=Array.from({length:81},function(){return Array.from({length:9},function(){return 0})}),this.paused=!1,this.pending=!1,this.time=0,this.timer=null,this.tempHistory={notes:[],temps:[]},this.temps=n,this.startTimer()},makeBoxes:function(t){var e=Array.from({length:9},function(){return[]});return t.forEach(function(t,n){var i=T.addresses[n],r=i.row,o=i.col,s=i.box;e[s].push({value:t,id:n,row:r,col:o,box:s,addr:s+"-"+e[s].length})}),e},startTimer:function(){var t=this;this.pending||this.paused||(this.timer=setInterval(function(){return t.time++},1e3))},stopTimer:function(){clearInterval(this.timer)},pushHistory:function(){(this.tempHistory.notes.length||this.tempHistory.temps.length)&&(this.histories.push(this.tempHistory),this.histories.length>50&&this.histories.splice(0,1),this.tempHistory={notes:[],temps:[]})},newTemp:function(t){var e=this;this.getActiveIndexes(function(n){if(e.noting){var i=t-1,r=e.notes[n][i];return e.tempHistory.notes.push({cellIndex:n,numberIndex:i,value:r}),e.notes[n].splice(i,1,r>0?0:t),e.resetTemp(n)}e.resetNote(n),e.temps[n]===t?e.resetTemp(n):(e.tempHistory.temps.push({cellIndex:n,value:e.temps[n]}),e.temps.splice(n,1,t),e.clearRelevantNotes(n,t),t===e.answer[n]?81===++e.corrects&&e.win():3===++e.mistakes&&e.gameOver())}),this.pushHistory()},clearRelevantNotes:function(t,e){var n=this,i=T.addresses[t],r=i.row,o=i.col,s=i.box;this.boxes[s].forEach(function(t){return n.removeNoteItem(t.id,e)}),this.notes.forEach(function(t,i){r!==T.addresses[i].row&&o!==T.addresses[i].col||n.removeNoteItem(i,e)})},erase:function(){var t=this;this.getActiveIndexes(function(e){t.resetNote(e),t.resetTemp(e)}),this.pushHistory()},undo:function(){var t=this;if(!this.paused){var e=this.histories.pop()||{},n=e.notes,i=void 0===n?[]:n,r=e.temps,o=void 0===r?[]:r;i.forEach(function(e){var n=e.cellIndex,i=e.numberIndex,r=e.value;i>-1?t.notes[n].splice(i,1,r):t.notes.splice(n,1,r)}),o.forEach(function(e){var n=e.cellIndex,i=e.value;t.temps.splice(n,1,i)})}},resetNote:function(t){this.notesState[t]&&(this.tempHistory.notes.push({cellIndex:t,value:this.notes[t]}),this.notes.splice(t,1,Array.from({length:9},function(){return 0})))},removeNoteItem:function(t,e){if(this.notesState[t]){var n=e-1;this.tempHistory.notes.push({cellIndex:t,numberIndex:n,value:this.notes[t][n]}),this.notes[t].splice(n,1,0)}},resetTemp:function(t){var e=this.temps[t];e&&(e===this.answer[t]&&this.corrects--,this.tempHistory.temps.push({cellIndex:t,value:e}),this.temps.splice(t,1,""))},getActiveIndexes:function(t){if(!this.paused)if(this.multiple)this.actives.forEach(function(e,n){e&&t(n)});else if(this.active.id>=0&&!this.active.value)return t(this.active.id)},toggleNoting:function(){this.noting=!this.noting,this.noting||(this.multiple=!1)},toggleMultiple:function(){this.multiple=!this.multiple,this.noting=this.multiple,this.multiple?this.active.id>=0&&!this.active.value&&!this.temps[this.active.id]&&(this.actives.splice(this.active.id,1,!0),this.active=-1):this.actives=Array.from({length:81},function(){return!1})},onActiveChange:function(t,e){t&&t!==this.active&&(!this.multiple||t.value||this.temps[t.id]?this.active=t:this.actives.splice(t.id,1,!this.actives[t.id]))},gameOver:function(){this.lost=!0,this.openPendingWindow()},win:function(){this.won=!0,this.openPendingWindow()},openPendingWindow:function(){this.pending=!0,this.stopTimer()},togglePaused:function(){this.paused=!this.paused,this.paused?this.stopTimer():this.startTimer()},onTouchMove:function(t){if(!this.multiple){var e=t.touches[0],n=e.clientX,i=e.clientY,r=document.elementFromPoint(n,i);if(r){var o=r.getAttribute("data-id");if(o){var a=o.split("-"),c=Object(s["a"])(a,2),u=c[0],l=c[1];this.onActiveChange(this.boxes[u][l])}}}}},filters:{prettifyTime:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;if(!(t>-1))return"00:00";var e=function(t){return("0"+t).slice(-2)},n=E(t),i=Object(s["a"])(n,3),r=i[0],o=i[1],a=i[2];return(r?"".concat(e(r),":"):"")+"".concat(e(o),":").concat(e(a))}}},P=H,W=n("2877"),U=Object(W["a"])(P,r,o,!1,null,null,null);U.options.__file="App.vue";var B=U.exports,Y=(n("38c8"),!0),J="serviceWorker"in navigator&&Y;J&&navigator.serviceWorker.register("/nudoku/service-worker.js").then(function(){console.log("Service Worker Registered!")}),i["a"].config.productionTip=!1,document.addEventListener("gesturestart",function(t){t.preventDefault()}),new i["a"]({render:function(t){return t(B)}}).$mount("#app")}});